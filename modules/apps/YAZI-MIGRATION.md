# Yazi Migration: Pop!_OS â†’ NixOS

## âœ… Migration Status

### Migrated Plugins

| Plugin | Pop!_OS (package.toml) | NixOS (yazi.nix) | Status |
|--------|------------------------|-------------------|--------|
| full-border | `yazi-rs/plugins:full-border` (rev: 57f1863) | `pkgs.yaziPlugins.full-border` | âœ… |
| git | `yazi-rs/plugins:git` (rev: 57f1863) | `pkgs.yaziPlugins.git` | âœ… |
| searchjump | `DreamMaoMao/searchjump` (rev: cab627c) | Custom fetchFromGitHub | âœ… |
| starship | `Rolv-Apneseth/starship` (rev: eca1861) | Custom fetchFromGitHub | âœ… |
| bookmarks | `dedukun/bookmarks` (rev: 9ef1254) | Custom fetchFromGitHub | âœ… |

### Migrated Theme (Flavor)

| Flavor | Pop!_OS | NixOS | Status |
|--------|---------|-------|--------|
| Catppuccin Macchiato | `yazi-rs/flavors:catppuccin-macchiato` (rev: 4a1802a) | Custom fetchFromGitHub | âœ… |

## ðŸ”„ Workflow Changes

### Pop!_OS (Imperative)
```bash
# Install plugins
ya pkg add yazi-rs/plugins:git
ya pkg add DreamMaoMao/searchjump

# Update plugins
ya pkg upgrade

# Remove plugins
ya pkg remove searchjump
```

### NixOS (Declarative)
```bash
# 1. Edit configuration
nvim modules/apps/yazi.nix

# 2. Apply changes
just switch macbook

# 3. Update everything (including plugins)
just upgrade macbook
```

## ðŸŽ¯ Preserved Keybindings

### Added Plugins
- **`s`** â†’ searchjump (search and jump)
- **`'`** â†’ Save bookmark
- **`"`** â†’ Jump to bookmark
- **`bd`** â†’ Delete bookmark

### Keybindings Kept from Pop!_OS
All your original keybindings were preserved in the NixOS configuration.

## ðŸ“¦ File Comparison

### Pop!_OS
```
~/.config/yazi/
â”œâ”€â”€ yazi.toml          # Manual configuration
â”œâ”€â”€ package.toml       # Plugin list (managed by ya)
â”œâ”€â”€ plugins/           # Installed via ya pkg
â”‚   â”œâ”€â”€ full-border.yazi/
â”‚   â”œâ”€â”€ git.yazi/
â”‚   â”œâ”€â”€ searchjump.yazi/
â”‚   â”œâ”€â”€ starship.yazi/
â”‚   â””â”€â”€ bookmarks.yazi/
â””â”€â”€ flavors/
    â””â”€â”€ catppuccin-macchiato.yazi/
```

### NixOS
```
modules/apps/yazi.nix  # Single source of truth
â†“
~/.config/yazi/        # Generated automatically
â”œâ”€â”€ yazi.toml          # Generated by home-manager
â”œâ”€â”€ plugins/           # Symlinks to /nix/store
â”‚   â”œâ”€â”€ full-border.yazi/ â†’ /nix/store/xxx-yaziPlugins-full-border/
â”‚   â”œâ”€â”€ git.yazi/         â†’ /nix/store/xxx-yaziPlugins-git/
â”‚   â”œâ”€â”€ searchjump.yazi/  â†’ /nix/store/xxx-searchjump/
â”‚   â”œâ”€â”€ starship.yazi/    â†’ /nix/store/xxx-starship/
â”‚   â””â”€â”€ bookmarks.yazi/   â†’ /nix/store/xxx-bookmarks/
â””â”€â”€ flavors/
    â””â”€â”€ catppuccin-macchiato.yazi/ â†’ /nix/store/xxx-flavors/
```

## ðŸš« Commands You No Longer Need

| Pop!_OS | NixOS | Reason |
|---------|-------|--------|
| `ya pkg upgrade` | `just upgrade macbook` | Plugins managed by Nix |
| `ya pkg add <plugin>` | Edit `yazi.nix` | Declarative configuration |
| `ya pkg remove <plugin>` | Remove from `yazi.nix` | Declarative configuration |
| Edit `package.toml` | Edit `yazi.nix` | Single source of truth |

## ðŸŽ¨ Catppuccin Theme

The Catppuccin Macchiato theme is configured exactly like in Pop!_OS:
- Flavor: catppuccin-macchiato
- Revision: 4a1802a (same as your package.toml)

## ðŸ”§ Future Updates

To update hashes when new versions are released:

```bash
# For custom plugins
nix-prefetch-github DreamMaoMao searchjump --rev <new-rev>
nix-prefetch-github Rolv-Apneseth starship.yazi --rev <new-rev>
nix-prefetch-github dedukun bookmarks.yazi --rev <new-rev>

# Update hash in yazi.nix and rebuild
just switch macbook
```

## âœ… Verification

To confirm everything is the same:
```bash
# See installed plugins
ls -la ~/.config/yazi/plugins/

# See theme
ls -la ~/.config/yazi/flavors/

# Test yazi
yazi

# Custom keybindings:
# - Press 's' for searchjump
# - Press ' to save a bookmark
# - Press " to jump to a bookmark
```

---

**Everything migrated! Same functionality, declarative management! ðŸŽ‰**
